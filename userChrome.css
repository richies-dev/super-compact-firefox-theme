:root {
    --tab-active-bg-color: #057 !important;
    --tab-inactive-bg-color: #333 !important;
    --tab-active-fg-fallback-color: #eee !important;
    /* color of text in an active tab without a container */
    --tab-inactive-fg-fallback-color: #888 !important;
    /* color of text in an inactive tab without a container */
    --tab-hover-background-color: #333 !important;
    --urlbar-focused-bg-color: #1c1b2200 !important;
    --urlbar-not-focused-bg-color: #1c1b2200 !important;
    --tab-font: "DejaVu Sans Mono" !important;
    --urlbar-font: "DejaVu Sans Mono" !important;
    --toolbar-bgcolor: #333 !important;
    --toolbar-field-background-color: #00000000 !important;

    /* try increasing if you encounter problems */
    --urlbar-height-setting: 16px !important;
    --tab-min-height: 14px !important;

    /* I don't recommend you touch this unless you know what you're doing */
    --arrowpanel-menuitem-padding: 2px !important;
    --arrowpanel-border-radius: 0px !important;
    --arrowpanel-menuitem-border-radius: 0px !important;
    --toolbarbutton-border-radius: 0px !important;
    --toolbarbutton-inner-padding: 0px 0px !important;
    --toolbar-field-focus-background-color: var(--urlbar-focused-bg-color) !important;
    --toolbar-field-focus-border-color: transparent !important;
    --urlbarView-row-gutter: 0px !important;
    --icon-size-default: 12px !important;

    /*   --button-outer-padding-block-start: 12px!important; */
    /*   --button-outer-padding-inline: 1px!important; */
    /*   --button-outer-padding-block: 2px!important; */
}

#navigator-toolbox {
    height: 34px !important;
}

toolbar {
    min-height: 16px !important;
}

.tabbrowser-tab {
    height: 16px !important;
}

#sidebar-main {
    padding-block-start: 18px !important;
}

#nav-bar {
    background-color: var(--toolbar-bgcolor) !important;
}

.tools-and-extensions,
.actions-list {
    --button-outer-padding-block-start: 0px !important;
    --button-size-icon: 8px !important;
    --icon-size-default: 12px !important;
    --button-padding-icon: 12px !important;
    --button-margin-icon: 0px !important;
}

.actions-list {
    &>moz-button:not(.tools-overflow) {
        --button-outer-padding-inline: 1px !important;
        --button-outer-padding-block: 10px !important;
        --button-outer-padding-block-start: 0px !important;
        --button-outer-padding-block-end: 0px !important;
    }
}

.urlbar-page-action {
    justify-content: center !important;
    width: 14px !important;
    height: 14px !important;
    margin-left: 3px !important;
}

.toolbarbutton-badge-stack>image {
    width: 14px !important;
    height: 14px !important;
}

#downloads-button>.toolbarbutton-badge-stack {
    padding: 0px !important;
    width: 14px;
    height: 14px;
    /*   padding: 2px!important; */
}

#downloads-button>.toolbarbutton-badge-stack>box {
    /*! transform: scale(80%); */
    padding: 0 !important;
    /*
    I do not like this, but it works. The #downloads-button is a height of 20px, and
    so is this box, but we can't scale all of the inner images for each box unless we
    want to tweak each one (which right now I don't) - so here's the
    current solution.
  -3.25% is just a random number that seems to look okay
  */
    transform: scale(87.5%) translateX(-3.25%) translateY(-3.25%);
}

#downloads-button>.toolbarbutton-badge-stack>box>image {}

/* .button-background {
  &[type~="icon"]:not(.labelled), &:not(.labelled):has(img) {
    width: var(--button-size-icon);
    height: var(--button-size-icon);
    padding: var(--button-padding-icon);
  }
} */

/* #urlbar[attr*=] */
#urlbar,
#navigator-toolbox {
    --focus-outline: none !important;
    /*  Maybe temporary? for macos goofyness  */
    transform: none !important;
}

#urlbar-background,
#searchbar {
    border: 0px !important;
}

#urlbar[focused]>#urlbar-background,
#searchbar:focus-within {
    box-shadow: none !important;
}

#urlbar[open]>#urlbar-background {
    border-color: none !important;
    box-shadow: none !important;
}

#urlbar:is([focused],
    [open]),
#searchbar:focus-within {
    color: var(--toolbar-field-focus-color);
}

#urlbar:is([focused],
    [open])>#urlbar-background,
#searchbar:focus-within {
    background: linear-gradient(to right,
            #3339 0%,
            #23333377 .6%,
            #13333388 50%,
            #23333377 99.4%,
            #3339 100%);
    width: 100% !important;
}

#urlbar {
    --urlbar-container-padding: 2px;
}

#urlbar[breakout][breakout-extend]>#urlbar-background {}

#urlbar[breakout][breakout-extend] {
    --urlbar-margin-inline: 0px;
    margin-left: calc(-1 * var(--urlbar-margin-inline));
    width: calc(var(--urlbar-width) + 2 * var(--urlbar-margin-inline));

    >.urlbar-input-container {}
}

.urlbar-input-container {
    border: none !important;
}

#urlbar-container {}

.urlbarView {
    position: relative;
    width: 100% !important;
    margin: 0 !important;
}

.urlbarView-favicon {
    width: 10px !important;
    height: 10px !important;
    ;
    margin-inline-end: 8px !important;
    margin-left: 4px !important;
    flex-basis: 10px;
    flex-grow: 0;
}

.urlbarView {
    /* Don't handle window drag events in case we are overlapping a toolbar */
    /*   -moz-window-dragging: no-drag; */

    /* Match urlbar-background's border. */
    border-inline: 0px solid transparent !important;
}

#nav-bar-customization-target {
    margin: 0px 0px 0px 4px !important;
}

.toolbarbutton-icon {
    width: 14px !important;
}

#TabsToolbar-customization-target {}

.button-background {
    --button-size-icon-small: 16px !important;
    --button-size-icon: 14px !important;
}

#TabsToolbar {
    align-items: flex-start;
}

#TabsToolbar .toolbarbutton-icon {
    width: 12px !important;
    height: 12px !important;
    margin: 0 4px !important;
}

.tab-icon-overlay {
    width: 12px !important;
    height: 12px !important;
    margin: 0 4px !important;
    top: -2px !important;
    background-image: none !important;
    cursor: pointer !important;
}

#TabsToolbar .tabbrowser-tab .tab-text {
    margin-block: 1px 0 !important;
}

.tab-content {}

.tabbrowser-tab {
    --toolbarbutton-inner-padding: 0px 2px !important;
}

#TabsToolbar .toolbarbutton-icon,
#TabsToolbar .tab-icon-image {
    width: 12px !important;
    height: 12px !important;
    --tab-icon-end-margin: 2px !important;
}

#tabbrowser-tabs {
    --tab-min-width: unset;
    --tab-inline-padding: calc((var(--tab-collapsed-width) - var(--icon-size-default)) / 2);
    --tab-inline-padding: 2px;
    --tab-inner-inline-margin: 2px;
}

.urlbar-icon {
    height: 100% !important;
}

#forward-button {}

#urlbarView {
    background: transparent !important;
}

#urlbar-background,
#searchbar,
.urlbar-input-container,
.urlbar-input-container:expanded,
.urlbar-input-container:expanded identity-icon {
    transition: .2s ease-in-out;
    color: #333 !important;
    background: var(--toolbar-field-background-color) !important;
    /* Not currently supported :/ */
    /*   backdrop-filter: blur(6px); */
    opacity: 1 !important;
}

.urlbar-input-container image {
    width: 14px !important;
    height: 14px !important;
    align-self: center !important;
    text-align: center;
    justify-self: center !important;
}

#urlbar-background {}

/* Tab: hovered colors */
#tabbrowser-tabs .tabbrowser-tab:hover:not([selected]) .tab-content {
    background: #1c1b22;
}

/* --- GENERAL DEBLOAT ---------------------------------- */

/* Bottom left page loading status or url preview */
#statuspanel {
    display: none !important;
}

/* remove radius from right-click popup */
menupopup,
panel {
    --panel-border-radius: 0px !important;
}

menu,
menuitem,
menucaption {
    border-radius: 0px !important;
}

/* no stupid large buttons in right-click menu */
menupopup>#context-navigation {
    display: none !important;
}

menupopup>#context-sep-navigation {
    display: none !important;
}

/* --- DEBLOAT NAVBAR ----------------------------------- */
#back-button {
    /*   display: none; */
}

#forward-button {
    /*   display: none; */
}

#reload-button {
    display: none;
}

#stop-button {
    display: none;
}

#home-button {
    display: none;
}

#library-button {
    display: none;
}

/* #fxa-toolbar-menu-button { display: none; } */
/* empty space before and after the url bar */
#customizableui-special-spring1,
#customizableui-special-spring2 {
    display: none;
}

.private-browsing-indicator-with-label {
    display: none;
}

/* --- STYLE NAVBAR ------------------------------------ */

/* remove padding between toolbar buttons */
.toolbarbutton-1 {
    padding: 0 0 !important;
    margin-right: 0px !important;
}

#nav-bar-customization-target .toolbarbutton-1 {
    margin-right: 2px !important;
}

/* add it back to the downloads button, otherwise it's too close to the urlbar */
#downloads-button {}

/* add padding to the right of the last button so that it doesn't touch the edge of the window */
#PanelUI-menu-button {
    padding: 0px 2px 0px 2px !important;
}

#urlbar-container {
    --urlbar-container-height: var(--urlbar-height-setting) !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    font-family: sans-serif;
    font-size: 10px;
}

#urlbar {
    --urlbar-height: var(--urlbar-height-setting) !important;
    --urlbar-toolbar-height: var(--urlbar-height-setting) !important;
    min-height: var(--urlbar-height-setting) !important;
    border-color: var(--lwt-toolbar-field-border-color,
            hsla(240, 5%, 5%, 0.25)) !important;
}

#urlbar-input {
    margin-left: 0.4em !important;
    margin-right: 0.4em !important;
}

#navigator-toolbox {
    border: none !important;
}

/* keep pop-up menus from overlapping with navbar */
#widget-overflow {
    margin: 4px !important;
}

#customizationui-widget-panel {
    margin: 4px !important;
}

#unified-extensions-panel {
    margin-top: 4px !important;
}

#appMenu-popup {
    margin-top: 4px !important;
}

/* --- UNIFIED EXTENSIONS BUTTON ------------------------ */

/* make extension icons smaller */
#unified-extensions-view {
    --uei-icon-size: 16px;
}

/* hide bloat */
.unified-extensions-item-message-deck,
#unified-extensions-view>.panel-header,
#unified-extensions-view>toolbarseparator,
#unified-extensions-manage-extensions {
    display: none !important;
}

/* add 3px padding on the top and the bottom of the box */
.panel-subview-body {
    padding: 3px 0px !important;
}

.unified-extensions-item-contents {
    line-height: 1 !important;
    white-space: nowrap !important;
}

#unified-extensions-panel .unified-extensions-item {
    margin-block: 0 !important;
}

.toolbar-menupopup :is(menu,
    menuitem),
.subview-subheader,
panelview .toolbarbutton-1,
.subviewbutton,
.widget-overflow-list .toolbarbutton-1 {
    padding: 0px !important;
}

/* --- DEBLOAT URLBAR ----------------------------------- */
#pageActionButton {
    display: none;
}

#pocket-button {
    display: none;
}

#urlbar-zoom-button {
    display: none;
}

#tracking-protection-icon-container {
    display: none !important;
}

/* #reader-mode-button{ display: none !important; } */
/* #star-button { display: none; } */
/* #star-button-box:hover { background: inherit !important; } */
#urlbar-searchmode-switcher {
    display: none;
}

#searchmode-switcher-chicklet {
    display: none !important;
}

#identity-box {
    margin-inline-end: 0 !important;
}

.identity-box-button {
    padding: 0 !important;
    margin-right: 2px !important;
}

/* Go to arrow button at the end of the urlbar when searching */
#urlbar-go-button {
    display: none;
}

/* remove container indicator from urlbar */
#userContext-label,
#userContext-indicator {
    display: none !important;
}

/* --- STYLE TAB TOOLBAR -------------------------------- */
#titlebar {
    --proton-tab-block-margin: 0px !important;
    --tab-block-margin: 0px !important;
}

#TabsToolbar,
.tabbrowser-tab {

    /*   max-height: var(--tab-min-height) !important; */
    font-size: 11px !important;
}

/* Change color of normal tabs */
tab:not([selected="true"]) {
    /*   background-color: var(--tab-inactive-bg-color) !important; */
    color: #eee !important;
    /*   color: var(
    --identity-icon-color,
    var(--tab-inactive-fg-fallback-color) */
    /* ) !important; */
}

tab {
    font-family: sans-serif;
    /*   font-weight: bold; */
    border: none !important;
    padding-top: 0 !important;
}

.tab-content {
    /*   padding: 0 0 0 var(--tab-inline-padding); */
}

.tab-background {
    margin-block: 0 !important;
    min-height: var(--tab-min-height);
    outline-offset: 0 !important;
}

/* safari style tab width */
.tabbrowser-tab[fadein] {
    max-width: 100vw !important;
    border: none;
}


/* Hide close button on tabs */
#tabbrowser-tabs .tabbrowser-tab .tab-close-button {
    display: none !important;
}

/* Hide close button on tabs */
#tabbrowser-tabs .tabbrowser-tab:hover .tab-close-button {
    display: initial !important;
    opacity: .6 !important;
    font-size: 7px !important;
    padding: 6px 3px !important;
    /*   width: 16px!important; */
    width: 16px !important;
    cursor: pointer !important;
}

#tabbrowser-tabs .tabbrowser-tab .tab-close-button:hover {
    opacity: .9 !important;
    background-color: transparent !important;
}

/* disable favicons in tab */
/* .tab-icon-stack:not([pinned]) { display: none !important; } */
.tabbrowser-tab {
    /* remove border between tabs */
    padding-inline: 0px !important;
    /* reduce fade effect of tab text */
    --tab-label-mask-size: 1em !important;
    /* fix pinned tab behaviour on overflow */
    overflow-clip-margin: 0px !important;
}

.tab-icon-stack {
    margin-right: 2px;
    margin-left: 2px;
}

/* Tab: selected colors */
#tabbrowser-tabs .tabbrowser-tab[selected] .tab-content {
    background: var(--tab-active-bg-color) !important;
    color: var(--identity-icon-color,
            var(--tab-active-fg-fallback-color)) !important;
}

/* hide window controls */
.titlebar-buttonbox-container {
    display: none;
}

/* remove titlebar spacers */
.titlebar-spacer {
    display: none !important;
}

/* disable tab shadow */
#tabbrowser-tabs:not([noshadowfortests]) .tab-background:is([selected],
    [multiselected]) {
    box-shadow: none !important;
}

/* remove dark space between pinned tab and first non-pinned tab */
#tabbrowser-tabs[haspinnedtabs]:not([positionpinnedtabs])>#tabbrowser-arrowscrollbox>.tabbrowser-tab:nth-child(1 of :not([pinned],
        [hidden])) {
    margin-inline-start: 0px !important;
}

/* remove dropdown menu button which displays all tabs on overflow */
#alltabs-button {
    display: none !important;
}

/* fix displaying of pinned tabs on overflow */
#tabbrowser-tabs:not([secondarytext-unsupported]) .tab-label-container {
    /*! --uc-navbar-transform: -18px; */
    /*   calc(0px - var(--urlbar-height-setting)); */
}

#tabbrowser-tabs {
    min-height: var(--tab-min-height) !important;
}

/* remove overflow scroll buttons */
#scrollbutton-up,
#scrollbutton-down {
    display: none !important;
}

/* remove new tab button */
#tabs-newtab-button {
    display: none !important;
}

/* hide private browsing indicator */
#private-browsing-indicator-with-label {
    display: none;
}

/* --- AUTOHIDE NAVBAR ---------------------------------- */
:root {
    --uc-navbar-transform: -18px;
    /*   calc(0px - var(--urlbar-height-setting)); */
}

#navigator-toolbox>div {
    display: contents;
}

:root[sessionrestored] :where(#nav-bar,
    #PersonalToolbar,
    #tab-notification-deck,
    .global-notificationbox) {
    transform: translateY(0);
}

#nav-bar,
#urlbar-input,
#nav-bar>.sidebar-button {
    transition: all 0.2s ease-in-out !important;
    color: #eeeeee00 !important;
}

.urlbarView {
    background: #333e;
}

:root:is([customizing],
    [chromehidden*="toolbar"]) :where(#nav-bar,
    #PersonalToolbar,
    #tab-notification-deck,
    .global-notificationbox) {
    transform: none !important;
    opacity: 1 !important;
    color: #eee !important;
}

#nav-bar:not([customizing]) {
    opacity: 0;
    position: relative;
    z-index: 2;
}

#titlebar {
    position: relative;
    z-index: 3;
}

#urlbar-background {
    opacity: 1 !important;
}

#navigator-toolbox,
#sidebar-box,
#sidebar-main,
#sidebar-splitter,
#tabbrowser-tabbox {
    z-index: auto !important;
}

/* Show when toolbox is hovered */
#titlebar:hover~.browser-toolbar,
.browser-titlebar:hover~ :is(#nav-bar,
    #PersonalToolbar,
    #urlbar-input),
#nav-bar:hover,
#nav-bar:hover~.browser-toolbar+#PersonalToolbar,
#nav-bar:hover~.browser-toolbar #urlbar-input,
#nav-bar:hover image,
#TabsToolbar:hover~.browser-toolbar image,
#nav-bar:hover~.browser-toolbar #urlbar-input,
#nav-bar:hover #urlbar-input,
#urlbar-input:hover,
#TabsToolbar:hover~.browser-toolbar #urlbar-input,
#navigator-toolbox:focus-within>.browser-toolbar #urlbar-input {
    /*   transform: translateY(0); */
    opacity: 1;
    color: #eeeeeeff !important;
}

#nav-bar:hover image {
    /*   transform: translateY(0); */
    opacity: 1;
    color: #eee !important;
}

:root[sessionrestored] #urlbar[popover] {
    opacity: 0;
    pointer-events: none;
    /*   transform: translateY(var(--uc-navbar-transform)); */
}

#mainPopupSet:has(> [panelopen]:not(#ask-chat-shortcuts,
        #selection-shortcut-action-panel,
        #chat-shortcuts-options-panel,
        #tab-preview-panel))~toolbox #urlbar[popover],
.browser-titlebar:is(:hover,
    :focus-within)~#nav-bar #urlbar[popover],
#nav-bar:is(:hover,
    :focus-within) #urlbar[popover],
#urlbar-container>#urlbar[popover]:is([focused],
    [open]),
#nav-bar:hover {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
}

/* This ruleset is separate, because not having :has support breaks other selectors as well */
#mainPopupSet:has(> [panelopen]:not(#ask-chat-shortcuts,
        #selection-shortcut-action-panel,
        #chat-shortcuts-options-panel,
        #tab-preview-panel))~#navigator-toolbox>.browser-toolbar {
    transform: translateY(0);
    opacity: 1;
}

/* Move up the content view */
:root[sessionrestored]:not([chromehidden~="toolbar"])>body>#browser {
    margin-top: var(--uc-navbar-transform);
}
